{"ast":null,"code":"import { postUnsubscribe } from '../api/postUnsubscribe';\nimport { from, of } from 'rxjs';\nimport { exhaustMap, filter, catchError } from 'rxjs/operators';\nimport { isActionOf } from 'typesafe-actions';\nimport { subscriptionDetailsRequestedEvent, unsubscribeReceivedEvent, unsubscribeErroredEvent, unsubscribeRequestedEvent } from '../events';\nimport Notifications from 'react-notification-system-redux';\n\nvar unsubscribeReceivedEpic = function unsubscribeReceivedEpic(action$, store) {\n  return action$.pipe(filter(isActionOf(unsubscribeRequestedEvent)), exhaustMap(function () {\n    return from(postUnsubscribe()).pipe(exhaustMap(function (apiResponse) {\n      if (apiResponse.is_success) {\n        Notifications.success({\n          title: 'Subscription',\n          message: apiResponse.data,\n          position: 'tc',\n          autoDismiss: 10,\n          action: {\n            label: 'Close',\n            callback: function callback() {\n              return console.log('Notification closed');\n            }\n          }\n        });\n        return of(unsubscribeReceivedEvent(), subscriptionDetailsRequestedEvent());\n      } else {\n        Notifications.error({\n          title: 'Subscription',\n          message: apiResponse.data,\n          position: 'tc',\n          autoDismiss: 10,\n          action: {\n            label: 'Close',\n            callback: function callback() {\n              return console.log('Notification closed');\n            }\n          }\n        });\n        return of(unsubscribeReceivedEvent());\n      }\n    }), catchError(function () {\n      return of(unsubscribeErroredEvent({\n        id: undefined,\n        error: 'Network error',\n        errorDescription: 'Check your internet connection'\n      }));\n    }));\n  }));\n};\n\nexport default [unsubscribeReceivedEpic];","map":{"version":3,"sources":["/Users/ognjen/Desktop/with-typescript/src/services/payments/subscriptions/epics/unsubscribeReceivedEpic.ts"],"names":["postUnsubscribe","from","of","exhaustMap","filter","catchError","isActionOf","subscriptionDetailsRequestedEvent","unsubscribeReceivedEvent","unsubscribeErroredEvent","unsubscribeRequestedEvent","Notifications","unsubscribeReceivedEpic","action$","store","pipe","apiResponse","is_success","success","title","message","data","position","autoDismiss","action","label","callback","console","log","error","id","undefined","errorDescription"],"mappings":"AAAA,SAASA,eAAT,QAAgC,wBAAhC;AAEA,SAASC,IAAT,EAAeC,EAAf,QAAyB,MAAzB;AACA,SAASC,UAAT,EAAqBC,MAArB,EAA6BC,UAA7B,QAA+C,gBAA/C;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAAwCC,iCAAxC,EAA2EC,wBAA3E,EAAqGC,uBAArG,EAA8HC,yBAA9H,QAAgK,WAAhK;AAEA,OAAOC,aAAP,MAA0B,iCAA1B;;AAGA,IAAMC,uBAAsG,GAAG,SAAzGA,uBAAyG,CAACC,OAAD,EAAUC,KAAV;AAAA,SAC7GD,OAAO,CAACE,IAAR,CACEX,MAAM,CAACE,UAAU,CAACI,yBAAD,CAAX,CADR,EAEEP,UAAU,CAAC;AAAA,WACTF,IAAI,CAACD,eAAe,EAAhB,CAAJ,CAAwBe,IAAxB,CACEZ,UAAU,CAAC,UAAAa,WAAW,EAAI;AACtB,UAAIA,WAAW,CAACC,UAAhB,EAA4B;AACxBN,QAAAA,aAAa,CAACO,OAAd,CACI;AACEC,UAAAA,KAAK,EAAE,cADT;AAEEC,UAAAA,OAAO,EAAEJ,WAAW,CAACK,IAFvB;AAGEC,UAAAA,QAAQ,EAAE,IAHZ;AAIEC,UAAAA,WAAW,EAAE,EAJf;AAKEC,UAAAA,MAAM,EAAE;AACNC,YAAAA,KAAK,EAAE,OADD;AAENC,YAAAA,QAAQ,EAAE;AAAA,qBAAMC,OAAO,CAACC,GAAR,CAAY,qBAAZ,CAAN;AAAA;AAFJ;AALV,SADJ;AAYA,eAAO1B,EAAE,CAAEM,wBAAwB,EAA1B,EAA8BD,iCAAiC,EAA/D,CAAT;AACH,OAdD,MAeK;AACDI,QAAAA,aAAa,CAACkB,KAAd,CACI;AACEV,UAAAA,KAAK,EAAE,cADT;AAEEC,UAAAA,OAAO,EAAEJ,WAAW,CAACK,IAFvB;AAGEC,UAAAA,QAAQ,EAAE,IAHZ;AAIEC,UAAAA,WAAW,EAAE,EAJf;AAKEC,UAAAA,MAAM,EAAE;AACNC,YAAAA,KAAK,EAAE,OADD;AAENC,YAAAA,QAAQ,EAAE;AAAA,qBAAMC,OAAO,CAACC,GAAR,CAAY,qBAAZ,CAAN;AAAA;AAFJ;AALV,SADJ;AAaE,eAAO1B,EAAE,CAACM,wBAAwB,EAAzB,CAAT;AACL;AACJ,KAhCS,CADZ,EAkCEH,UAAU,CAAC;AAAA,aAAMH,EAAE,CAACO,uBAAuB,CAAC;AAC1CqB,QAAAA,EAAE,EAAEC,SADsC;AAE1CF,QAAAA,KAAK,EAAE,eAFmC;AAG1CG,QAAAA,gBAAgB,EAAE;AAHwB,OAAD,CAAxB,CAAR;AAAA,KAAD,CAlCZ,CADS;AAAA,GAAD,CAFZ,CAD6G;AAAA,CAA/G;;AA+CA,eAAe,CAACpB,uBAAD,CAAf","sourcesContent":["import { postUnsubscribe } from '../api/postUnsubscribe';\nimport { Epic } from 'redux-observable'\nimport { from, of } from 'rxjs'\nimport { exhaustMap, filter, catchError } from 'rxjs/operators'\nimport { isActionOf } from 'typesafe-actions'\nimport { SubscriptionDetailsEventTypes, subscriptionDetailsRequestedEvent, unsubscribeReceivedEvent, unsubscribeErroredEvent, unsubscribeRequestedEvent  } from '../events'\nimport { RootState } from '../../../RootState'\nimport Notifications from 'react-notification-system-redux'\n\n\nconst unsubscribeReceivedEpic: Epic<SubscriptionDetailsEventTypes, SubscriptionDetailsEventTypes, RootState> = (action$, store) =>\n  action$.pipe(\n    filter(isActionOf(unsubscribeRequestedEvent)),\n    exhaustMap(() =>\n      from(postUnsubscribe()).pipe(\n        exhaustMap(apiResponse => {\n            if (apiResponse.is_success) {\n                Notifications.success(\n                    {\n                      title: 'Subscription',\n                      message: apiResponse.data,\n                      position: 'tc',\n                      autoDismiss: 10,\n                      action: {\n                        label: 'Close',\n                        callback: () => console.log('Notification closed')\n                      }\n                    }\n                  )\n                return of (unsubscribeReceivedEvent(), subscriptionDetailsRequestedEvent());\n            }\n            else {\n                Notifications.error(\n                    {\n                      title: 'Subscription',\n                      message: apiResponse.data,\n                      position: 'tc',\n                      autoDismiss: 10,\n                      action: {\n                        label: 'Close',\n                        callback: () => console.log('Notification closed')\n                      }\n                    }\n                  );\n\n                  return of(unsubscribeReceivedEvent())\n            }\n        }),\n        catchError(() => of(unsubscribeErroredEvent({\n          id: undefined,\n          error: 'Network error',\n          errorDescription: 'Check your internet connection'\n        })))\n      )\n    )\n  )\n\nexport default [unsubscribeReceivedEpic]\n"]},"metadata":{},"sourceType":"module"}