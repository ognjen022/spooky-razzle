{"ast":null,"code":"import { hash } from \"./hash\";\nexport var getAccessToken = function getAccessToken() {\n  return window.localStorage.getItem(\"accessToken:\".concat(hash()));\n};\nexport var getRefreshToken = function getRefreshToken() {\n  return window.localStorage.getItem(\"refreshToken:\".concat(hash()));\n};\nexport var setAccessToken = function setAccessToken(accessToken) {\n  window.localStorage.setItem(\"accessToken:\".concat(hash()), accessToken);\n};\nexport var setRefreshToken = function setRefreshToken(refreshToken) {\n  window.localStorage.setItem(\"refreshToken:\".concat(hash()), refreshToken);\n};\nexport var cleanoutOldVersions = function cleanoutOldVersions() {\n  var itemsToRemove = [];\n  var hashValue = hash();\n\n  for (var i = 0, len = window.localStorage.length; i < len; ++i) {\n    var nextItem = window.localStorage.key(i);\n\n    if (nextItem && !(nextItem === null || nextItem === void 0 ? void 0 : nextItem.endsWith(\":\".concat(hashValue)))) {\n      itemsToRemove.push(nextItem);\n    }\n  } // console.log('cleanoutOldVersions itemsToRemove', itemsToRemove)\n\n\n  itemsToRemove.forEach(function (item) {\n    window.localStorage.removeItem(item);\n  });\n};\nexport var deleteTokens = function deleteTokens() {\n  window.localStorage.removeItem(\"refreshToken:\".concat(hash()));\n  window.localStorage.removeItem(\"accessToken:\".concat(hash()));\n};","map":{"version":3,"sources":["/Users/ognjen/Desktop/with-typescript/src/services/shared/tokenLocalStorage.ts"],"names":["hash","getAccessToken","window","localStorage","getItem","getRefreshToken","setAccessToken","accessToken","setItem","setRefreshToken","refreshToken","cleanoutOldVersions","itemsToRemove","hashValue","i","len","length","nextItem","key","endsWith","push","forEach","item","removeItem","deleteTokens"],"mappings":"AAAA,SAASA,IAAT,QAAqB,QAArB;AAEA,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAClC,SAAQC,MAAD,CAAgBC,YAAhB,CAA6BC,OAA7B,uBAAoDJ,IAAI,EAAxD,EAAP;AACD,CAFM;AAIP,OAAO,IAAMK,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AACnC,SAAQH,MAAD,CAAgBC,YAAhB,CAA6BC,OAA7B,wBAAqDJ,IAAI,EAAzD,EAAP;AACD,CAFM;AAIP,OAAO,IAAMM,cAAc,GAAG,SAAjBA,cAAiB,CAACC,WAAD,EAAyB;AACpDL,EAAAA,MAAD,CAAgBC,YAAhB,CAA6BK,OAA7B,uBAAoDR,IAAI,EAAxD,GAA8DO,WAA9D;AACD,CAFM;AAIP,OAAO,IAAME,eAAe,GAAG,SAAlBA,eAAkB,CAACC,YAAD,EAA0B;AACtDR,EAAAA,MAAD,CAAgBC,YAAhB,CAA6BK,OAA7B,wBAAqDR,IAAI,EAAzD,GAA+DU,YAA/D;AACD,CAFM;AAIP,OAAO,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,GAAM;AACvC,MAAIC,aAAuB,GAAG,EAA9B;AACA,MAAIC,SAAS,GAAGb,IAAI,EAApB;;AACA,OAAK,IAAIc,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAIb,MAAD,CAAgBC,YAAhB,CAA6Ba,MAAnD,EAA2DF,CAAC,GAAGC,GAA/D,EAAoE,EAAED,CAAtE,EAAyE;AACvE,QAAIG,QAAQ,GAAIf,MAAD,CAAgBC,YAAhB,CAA6Be,GAA7B,CAAiCJ,CAAjC,CAAf;;AACA,QAAIG,QAAQ,IAAI,EAACA,QAAD,aAACA,QAAD,uBAACA,QAAQ,CAAEE,QAAV,YAAuBN,SAAvB,EAAD,CAAhB,EAAsD;AACpDD,MAAAA,aAAa,CAACQ,IAAd,CAAmBH,QAAnB;AACD;AACF,GARsC,CAUvC;;;AACAL,EAAAA,aAAa,CAACS,OAAd,CAAsB,UAACC,IAAD,EAAU;AAC7BpB,IAAAA,MAAD,CAAgBC,YAAhB,CAA6BoB,UAA7B,CAAwCD,IAAxC;AACD,GAFD;AAGD,CAdM;AAgBP,OAAO,IAAME,YAAY,GAAG,SAAfA,YAAe,GAAM;AAC/BtB,EAAAA,MAAD,CAAgBC,YAAhB,CAA6BoB,UAA7B,wBAAwDvB,IAAI,EAA5D;AAECE,EAAAA,MAAD,CAAgBC,YAAhB,CAA6BoB,UAA7B,uBAAuDvB,IAAI,EAA3D;AACD,CAJM","sourcesContent":["import { hash } from \"./hash\";\n\nexport const getAccessToken = () => {\n  return (window as any).localStorage.getItem(`accessToken:${hash()}`);\n};\n\nexport const getRefreshToken = () => {\n  return (window as any).localStorage.getItem(`refreshToken:${hash()}`);\n};\n\nexport const setAccessToken = (accessToken: string) => {\n  (window as any).localStorage.setItem(`accessToken:${hash()}`, accessToken);\n};\n\nexport const setRefreshToken = (refreshToken: string) => {\n  (window as any).localStorage.setItem(`refreshToken:${hash()}`, refreshToken);\n};\n\nexport const cleanoutOldVersions = () => {\n  let itemsToRemove: string[] = [];\n  let hashValue = hash();\n  for (var i = 0, len = (window as any).localStorage.length; i < len; ++i) {\n    let nextItem = (window as any).localStorage.key(i);\n    if (nextItem && !nextItem?.endsWith(`:${hashValue}`)) {\n      itemsToRemove.push(nextItem);\n    }\n  }\n\n  // console.log('cleanoutOldVersions itemsToRemove', itemsToRemove)\n  itemsToRemove.forEach((item) => {\n    (window as any).localStorage.removeItem(item);\n  });\n};\n\nexport const deleteTokens = () => {\n  (window as any).localStorage.removeItem(`refreshToken:${hash()}`);\n\n  (window as any).localStorage.removeItem(`accessToken:${hash()}`);\n};\n"]},"metadata":{},"sourceType":"module"}