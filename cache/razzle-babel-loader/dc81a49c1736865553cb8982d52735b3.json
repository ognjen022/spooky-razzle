{"ast":null,"code":"import { hash } from \"./hash\";\nexport var getAccessToken = function getAccessToken() {\n  if (true) return window.localStorage.getItem(\"accessToken:\".concat(hash()));\n};\nexport var getRefreshToken = function getRefreshToken() {\n  if (true) return window.localStorage.getItem(\"refreshToken:\".concat(hash()));\n};\nexport var setAccessToken = function setAccessToken(accessToken) {\n  if (true) window.localStorage.setItem(\"accessToken:\".concat(hash()), accessToken);\n};\nexport var setRefreshToken = function setRefreshToken(refreshToken) {\n  if (true) window.localStorage.setItem(\"refreshToken:\".concat(hash()), refreshToken);\n};\nexport var cleanoutOldVersions = function cleanoutOldVersions() {\n  if (true) {\n    var itemsToRemove = [];\n    var hashValue = hash();\n\n    for (var i = 0, len = window.localStorage.length; i < len; ++i) {\n      var nextItem = window.localStorage.key(i);\n\n      if (nextItem && !(nextItem === null || nextItem === void 0 ? void 0 : nextItem.endsWith(\":\".concat(hashValue)))) {\n        itemsToRemove.push(nextItem);\n      }\n    } // console.log('cleanoutOldVersions itemsToRemove', itemsToRemove)\n\n\n    itemsToRemove.forEach(function (item) {\n      window.localStorage.removeItem(item);\n    });\n  }\n};\nexport var deleteTokens = function deleteTokens() {\n  if (true) {\n    window.localStorage.removeItem(\"refreshToken:\".concat(hash()));\n    window.localStorage.removeItem(\"accessToken:\".concat(hash()));\n  }\n};","map":{"version":3,"sources":["/Users/ognjen/Desktop/with-typescript/src/services/shared/tokenLocalStorage.ts"],"names":["hash","getAccessToken","window","localStorage","getItem","getRefreshToken","setAccessToken","accessToken","setItem","setRefreshToken","refreshToken","cleanoutOldVersions","itemsToRemove","hashValue","i","len","length","nextItem","key","endsWith","push","forEach","item","removeItem","deleteTokens"],"mappings":"AAAA,SAASA,IAAT,QAAqB,QAArB;AAEA,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAClC,YACE,OAAQC,MAAD,CAAgBC,YAAhB,CAA6BC,OAA7B,uBAAoDJ,IAAI,EAAxD,EAAP;AACH,CAHM;AAKP,OAAO,IAAMK,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AACnC,YACE,OAAQH,MAAD,CAAgBC,YAAhB,CAA6BC,OAA7B,wBAAqDJ,IAAI,EAAzD,EAAP;AACH,CAHM;AAKP,OAAO,IAAMM,cAAc,GAAG,SAAjBA,cAAiB,CAACC,WAAD,EAAyB;AACrD,YACGL,MAAD,CAAgBC,YAAhB,CAA6BK,OAA7B,uBAAoDR,IAAI,EAAxD,GAA8DO,WAA9D;AACH,CAHM;AAKP,OAAO,IAAME,eAAe,GAAG,SAAlBA,eAAkB,CAACC,YAAD,EAA0B;AACvD,YACGR,MAAD,CAAgBC,YAAhB,CAA6BK,OAA7B,wBACkBR,IAAI,EADtB,GAEEU,YAFF;AAIH,CANM;AAQP,OAAO,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,GAAM;AACvC,YAAmC;AACjC,QAAIC,aAAuB,GAAG,EAA9B;AACA,QAAIC,SAAS,GAAGb,IAAI,EAApB;;AACA,SAAK,IAAIc,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAIb,MAAD,CAAgBC,YAAhB,CAA6Ba,MAAnD,EAA2DF,CAAC,GAAGC,GAA/D,EAAoE,EAAED,CAAtE,EAAyE;AACvE,UAAIG,QAAQ,GAAIf,MAAD,CAAgBC,YAAhB,CAA6Be,GAA7B,CAAiCJ,CAAjC,CAAf;;AACA,UAAIG,QAAQ,IAAI,EAACA,QAAD,aAACA,QAAD,uBAACA,QAAQ,CAAEE,QAAV,YAAuBN,SAAvB,EAAD,CAAhB,EAAsD;AACpDD,QAAAA,aAAa,CAACQ,IAAd,CAAmBH,QAAnB;AACD;AACF,KARgC,CAUjC;;;AACAL,IAAAA,aAAa,CAACS,OAAd,CAAsB,UAACC,IAAD,EAAU;AAC7BpB,MAAAA,MAAD,CAAgBC,YAAhB,CAA6BoB,UAA7B,CAAwCD,IAAxC;AACD,KAFD;AAGD;AACF,CAhBM;AAkBP,OAAO,IAAME,YAAY,GAAG,SAAfA,YAAe,GAAM;AAChC,YAAmC;AAChCtB,IAAAA,MAAD,CAAgBC,YAAhB,CAA6BoB,UAA7B,wBAAwDvB,IAAI,EAA5D;AAECE,IAAAA,MAAD,CAAgBC,YAAhB,CAA6BoB,UAA7B,uBAAuDvB,IAAI,EAA3D;AACD;AACF,CANM","sourcesContent":["import { hash } from \"./hash\";\n\nexport const getAccessToken = () => {\n  if (typeof window !== \"undefined\")\n    return (window as any).localStorage.getItem(`accessToken:${hash()}`);\n};\n\nexport const getRefreshToken = () => {\n  if (typeof window !== \"undefined\")\n    return (window as any).localStorage.getItem(`refreshToken:${hash()}`);\n};\n\nexport const setAccessToken = (accessToken: string) => {\n  if (typeof window !== \"undefined\")\n    (window as any).localStorage.setItem(`accessToken:${hash()}`, accessToken);\n};\n\nexport const setRefreshToken = (refreshToken: string) => {\n  if (typeof window !== \"undefined\")\n    (window as any).localStorage.setItem(\n      `refreshToken:${hash()}`,\n      refreshToken\n    );\n};\n\nexport const cleanoutOldVersions = () => {\n  if (typeof window !== \"undefined\") {\n    let itemsToRemove: string[] = [];\n    let hashValue = hash();\n    for (var i = 0, len = (window as any).localStorage.length; i < len; ++i) {\n      let nextItem = (window as any).localStorage.key(i);\n      if (nextItem && !nextItem?.endsWith(`:${hashValue}`)) {\n        itemsToRemove.push(nextItem);\n      }\n    }\n\n    // console.log('cleanoutOldVersions itemsToRemove', itemsToRemove)\n    itemsToRemove.forEach((item) => {\n      (window as any).localStorage.removeItem(item);\n    });\n  }\n};\n\nexport const deleteTokens = () => {\n  if (typeof window !== \"undefined\") {\n    (window as any).localStorage.removeItem(`refreshToken:${hash()}`);\n\n    (window as any).localStorage.removeItem(`accessToken:${hash()}`);\n  }\n};\n"]},"metadata":{},"sourceType":"module"}