{"ast":null,"code":"import { hash } from \"./hash\";\nexport const getAccessToken = () => {\n  if (false) return window.localStorage.getItem(`accessToken:${hash()}`);\n};\nexport const getRefreshToken = () => {\n  if (false) return window.localStorage.getItem(`refreshToken:${hash()}`);\n};\nexport const setAccessToken = accessToken => {\n  if (false) window.localStorage.setItem(`accessToken:${hash()}`, accessToken);\n};\nexport const setRefreshToken = refreshToken => {\n  if (false) window.localStorage.setItem(`refreshToken:${hash()}`, refreshToken);\n};\nexport const cleanoutOldVersions = () => {\n  if (false) {\n    let itemsToRemove = [];\n    let hashValue = hash();\n\n    for (var i = 0, len = window.localStorage.length; i < len; ++i) {\n      let nextItem = window.localStorage.key(i);\n\n      if (nextItem && !(nextItem === null || nextItem === void 0 ? void 0 : nextItem.endsWith(`:${hashValue}`))) {\n        itemsToRemove.push(nextItem);\n      }\n    } // console.log('cleanoutOldVersions itemsToRemove', itemsToRemove)\n\n\n    itemsToRemove.forEach(item => {\n      window.localStorage.removeItem(item);\n    });\n  }\n};\nexport const deleteTokens = () => {\n  if (false) {\n    window.localStorage.removeItem(`refreshToken:${hash()}`);\n    window.localStorage.removeItem(`accessToken:${hash()}`);\n  }\n};","map":{"version":3,"sources":["/Users/ognjen/Desktop/with-typescript/src/services/shared/tokenLocalStorage.ts"],"names":["hash","getAccessToken","window","localStorage","getItem","getRefreshToken","setAccessToken","accessToken","setItem","setRefreshToken","refreshToken","cleanoutOldVersions","itemsToRemove","hashValue","i","len","length","nextItem","key","endsWith","push","forEach","item","removeItem","deleteTokens"],"mappings":"AAAA,SAASA,IAAT,QAAqB,QAArB;AAEA,OAAO,MAAMC,cAAc,GAAG,MAAM;AAClC,aACE,OAAQC,MAAD,CAAgBC,YAAhB,CAA6BC,OAA7B,CAAsC,eAAcJ,IAAI,EAAG,EAA3D,CAAP;AACH,CAHM;AAKP,OAAO,MAAMK,eAAe,GAAG,MAAM;AACnC,aACE,OAAQH,MAAD,CAAgBC,YAAhB,CAA6BC,OAA7B,CAAsC,gBAAeJ,IAAI,EAAG,EAA5D,CAAP;AACH,CAHM;AAKP,OAAO,MAAMM,cAAc,GAAIC,WAAD,IAAyB;AACrD,aACGL,MAAD,CAAgBC,YAAhB,CAA6BK,OAA7B,CAAsC,eAAcR,IAAI,EAAG,EAA3D,EAA8DO,WAA9D;AACH,CAHM;AAKP,OAAO,MAAME,eAAe,GAAIC,YAAD,IAA0B;AACvD,aACGR,MAAD,CAAgBC,YAAhB,CAA6BK,OAA7B,CACG,gBAAeR,IAAI,EAAG,EADzB,EAEEU,YAFF;AAIH,CANM;AAQP,OAAO,MAAMC,mBAAmB,GAAG,MAAM;AACvC,aAAmC;AACjC,QAAIC,aAAuB,GAAG,EAA9B;AACA,QAAIC,SAAS,GAAGb,IAAI,EAApB;;AACA,SAAK,IAAIc,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAIb,MAAD,CAAgBC,YAAhB,CAA6Ba,MAAnD,EAA2DF,CAAC,GAAGC,GAA/D,EAAoE,EAAED,CAAtE,EAAyE;AACvE,UAAIG,QAAQ,GAAIf,MAAD,CAAgBC,YAAhB,CAA6Be,GAA7B,CAAiCJ,CAAjC,CAAf;;AACA,UAAIG,QAAQ,IAAI,EAACA,QAAD,aAACA,QAAD,uBAACA,QAAQ,CAAEE,QAAV,CAAoB,IAAGN,SAAU,EAAjC,CAAD,CAAhB,EAAsD;AACpDD,QAAAA,aAAa,CAACQ,IAAd,CAAmBH,QAAnB;AACD;AACF,KARgC,CAUjC;;;AACAL,IAAAA,aAAa,CAACS,OAAd,CAAuBC,IAAD,IAAU;AAC7BpB,MAAAA,MAAD,CAAgBC,YAAhB,CAA6BoB,UAA7B,CAAwCD,IAAxC;AACD,KAFD;AAGD;AACF,CAhBM;AAkBP,OAAO,MAAME,YAAY,GAAG,MAAM;AAChC,aAAmC;AAChCtB,IAAAA,MAAD,CAAgBC,YAAhB,CAA6BoB,UAA7B,CAAyC,gBAAevB,IAAI,EAAG,EAA/D;AAECE,IAAAA,MAAD,CAAgBC,YAAhB,CAA6BoB,UAA7B,CAAyC,eAAcvB,IAAI,EAAG,EAA9D;AACD;AACF,CANM","sourcesContent":["import { hash } from \"./hash\";\n\nexport const getAccessToken = () => {\n  if (typeof window !== \"undefined\")\n    return (window as any).localStorage.getItem(`accessToken:${hash()}`);\n};\n\nexport const getRefreshToken = () => {\n  if (typeof window !== \"undefined\")\n    return (window as any).localStorage.getItem(`refreshToken:${hash()}`);\n};\n\nexport const setAccessToken = (accessToken: string) => {\n  if (typeof window !== \"undefined\")\n    (window as any).localStorage.setItem(`accessToken:${hash()}`, accessToken);\n};\n\nexport const setRefreshToken = (refreshToken: string) => {\n  if (typeof window !== \"undefined\")\n    (window as any).localStorage.setItem(\n      `refreshToken:${hash()}`,\n      refreshToken\n    );\n};\n\nexport const cleanoutOldVersions = () => {\n  if (typeof window !== \"undefined\") {\n    let itemsToRemove: string[] = [];\n    let hashValue = hash();\n    for (var i = 0, len = (window as any).localStorage.length; i < len; ++i) {\n      let nextItem = (window as any).localStorage.key(i);\n      if (nextItem && !nextItem?.endsWith(`:${hashValue}`)) {\n        itemsToRemove.push(nextItem);\n      }\n    }\n\n    // console.log('cleanoutOldVersions itemsToRemove', itemsToRemove)\n    itemsToRemove.forEach((item) => {\n      (window as any).localStorage.removeItem(item);\n    });\n  }\n};\n\nexport const deleteTokens = () => {\n  if (typeof window !== \"undefined\") {\n    (window as any).localStorage.removeItem(`refreshToken:${hash()}`);\n\n    (window as any).localStorage.removeItem(`accessToken:${hash()}`);\n  }\n};\n"]},"metadata":{},"sourceType":"module"}