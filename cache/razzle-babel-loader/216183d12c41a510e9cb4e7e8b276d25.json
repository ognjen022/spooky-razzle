{"ast":null,"code":"import { contactUsRequestedEvent, contactUsReceivedEvent, contactUsErroredEvent } from './../events';\nimport { from, of } from 'rxjs';\nimport { exhaustMap, filter, catchError } from 'rxjs/operators';\nimport { isActionOf } from 'typesafe-actions';\nimport { postContactUs } from '../api/postContactUs';\nimport Notifications from 'react-notification-system-redux';\n\nvar getSuccessNotification = function getSuccessNotification() {\n  return Notifications.success({\n    title: 'Sent',\n    message: 'Thanks for your message. We\\'ll be in touch shortly',\n    position: 'tc',\n    autoDismiss: 10,\n    action: {\n      label: 'Close',\n      callback: function callback() {\n        return console.log('Notification closed');\n      }\n    }\n  });\n};\n\nvar getErrorNotification = function getErrorNotification(error) {\n  return Notifications.error({\n    title: 'Send failed',\n    message: \"An error occurred \".concat(error),\n    position: 'tc',\n    autoDismiss: 10,\n    action: {\n      label: 'Close',\n      callback: function callback() {\n        return console.log('Notification closed');\n      }\n    }\n  });\n};\n\nvar contactUsRequestedEpic = function contactUsRequestedEpic(action$, store) {\n  return action$.pipe(filter(isActionOf(contactUsRequestedEvent)), exhaustMap(function (event) {\n    return from(postContactUs(event.payload.firstname, event.payload.lastname, event.payload.email, event.payload.messsage)).pipe(exhaustMap(function (apiResponse) {\n      return of(apiResponse.statusCode === 200 ? contactUsReceivedEvent(apiResponse.data) : contactUsErroredEvent(apiResponse.data), apiResponse.statusCode === 200 ? getSuccessNotification() : getErrorNotification(''));\n    }), catchError(function () {\n      return of(contactUsErroredEvent({\n        contactUsData: undefined,\n        error: 'Network error',\n        errorDescription: 'Check your network connection'\n      }));\n    }));\n  }));\n};\n\nexport default [contactUsRequestedEpic];","map":{"version":3,"sources":["/Users/ognjen/Desktop/spooky.live-ssr/src/services/contact/epic/contactUsRequestedEpic.ts"],"names":["contactUsRequestedEvent","contactUsReceivedEvent","contactUsErroredEvent","from","of","exhaustMap","filter","catchError","isActionOf","postContactUs","Notifications","getSuccessNotification","success","title","message","position","autoDismiss","action","label","callback","console","log","getErrorNotification","error","contactUsRequestedEpic","action$","store","pipe","event","payload","firstname","lastname","email","messsage","apiResponse","statusCode","data","contactUsData","undefined","errorDescription"],"mappings":"AAAA,SAASA,uBAAT,EAAuDC,sBAAvD,EAA+EC,qBAA/E,QAA4G,aAA5G;AAEA,SAASC,IAAT,EAAeC,EAAf,QAAyB,MAAzB;AACA,SAASC,UAAT,EAAqBC,MAArB,EAA6BC,UAA7B,QAA+C,gBAA/C;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAEA,SAASC,aAAT,QAA8B,sBAA9B;AACA,OAAOC,aAAP,MAA0B,iCAA1B;;AAEA,IAAMC,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAM;AACnC,SAAOD,aAAa,CAACE,OAAd,CACL;AACEC,IAAAA,KAAK,EAAE,MADT;AAEEC,IAAAA,OAAO,EAAE,qDAFX;AAGEC,IAAAA,QAAQ,EAAE,IAHZ;AAIEC,IAAAA,WAAW,EAAE,EAJf;AAKEC,IAAAA,MAAM,EAAE;AACNC,MAAAA,KAAK,EAAE,OADD;AAENC,MAAAA,QAAQ,EAAE;AAAA,eAAMC,OAAO,CAACC,GAAR,CAAY,qBAAZ,CAAN;AAAA;AAFJ;AALV,GADK,CAAP;AAYD,CAbD;;AAeA,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACC,KAAD,EAAgB;AAC3C,SAAOb,aAAa,CAACa,KAAd,CACL;AACEV,IAAAA,KAAK,EAAE,aADT;AAEEC,IAAAA,OAAO,8BAAuBS,KAAvB,CAFT;AAGER,IAAAA,QAAQ,EAAE,IAHZ;AAIEC,IAAAA,WAAW,EAAE,EAJf;AAKEC,IAAAA,MAAM,EAAE;AACNC,MAAAA,KAAK,EAAE,OADD;AAENC,MAAAA,QAAQ,EAAE;AAAA,eAAMC,OAAO,CAACC,GAAR,CAAY,qBAAZ,CAAN;AAAA;AAFJ;AALV,GADK,CAAP;AAYD,CAbD;;AAeA,IAAMG,sBAAiD,GAAG,SAApDA,sBAAoD,CAACC,OAAD,EAAUC,KAAV;AAAA,SACxDD,OAAO,CAACE,IAAR,CACErB,MAAM,CAACE,UAAU,CAACR,uBAAD,CAAX,CADR,EAEEK,UAAU,CAAC,UAACuB,KAAD;AAAA,WACTzB,IAAI,CAACM,aAAa,CAACmB,KAAK,CAACC,OAAN,CAAcC,SAAf,EAA0BF,KAAK,CAACC,OAAN,CAAcE,QAAxC,EAAkDH,KAAK,CAACC,OAAN,CAAcG,KAAhE,EAAuEJ,KAAK,CAACC,OAAN,CAAcI,QAArF,CAAd,CAAJ,CAAkHN,IAAlH,CACEtB,UAAU,CAAC,UAAA6B,WAAW;AAAA,aACpB9B,EAAE,CACA8B,WAAW,CAACC,UAAZ,KAA2B,GAA3B,GAAiClC,sBAAsB,CAACiC,WAAW,CAACE,IAAb,CAAvD,GAA4ElC,qBAAqB,CAACgC,WAAW,CAACE,IAAb,CADjG,EAEAF,WAAW,CAACC,UAAZ,KAA2B,GAA3B,GAAiCxB,sBAAsB,EAAvD,GAA4DW,oBAAoB,CAAC,EAAD,CAFhF,CADkB;AAAA,KAAZ,CADZ,EAOEf,UAAU,CAAC;AAAA,aAAMH,EAAE,CAACF,qBAAqB,CAAC;AACxCmC,QAAAA,aAAa,EAAEC,SADyB;AAExCf,QAAAA,KAAK,EAAE,eAFiC;AAGxCgB,QAAAA,gBAAgB,EAAE;AAHsB,OAAD,CAAtB,CAAR;AAAA,KAAD,CAPZ,CADS;AAAA,GAAD,CAFZ,CADwD;AAAA,CAA1D;;AAoBA,eAAe,CAACf,sBAAD,CAAf","sourcesContent":["import { contactUsRequestedEvent, ContactUsEventTypes, contactUsReceivedEvent, contactUsErroredEvent } from './../events';\nimport { Epic } from 'redux-observable'\nimport { from, of } from 'rxjs'\nimport { exhaustMap, filter, catchError } from 'rxjs/operators'\nimport { isActionOf } from 'typesafe-actions'\nimport { RootState } from '../../RootState'\nimport { postContactUs } from '../api/postContactUs'\nimport Notifications from 'react-notification-system-redux';\n\nconst getSuccessNotification = () => {\n  return Notifications.success(\n    {\n      title: 'Sent',\n      message: 'Thanks for your message. We\\'ll be in touch shortly',\n      position: 'tc',\n      autoDismiss: 10,\n      action: {\n        label: 'Close',\n        callback: () => console.log('Notification closed')\n      }\n    }\n  )\n}\n\nconst getErrorNotification = (error: any) => {\n  return Notifications.error(\n    {\n      title: 'Send failed',\n      message: `An error occurred ${error}`,\n      position: 'tc',\n      autoDismiss: 10,\n      action: {\n        label: 'Close',\n        callback: () => console.log('Notification closed')\n      }\n    }\n  )\n}\n\nconst contactUsRequestedEpic: Epic<any, any, RootState> = (action$, store) =>\n  action$.pipe(\n    filter(isActionOf(contactUsRequestedEvent)),\n    exhaustMap((event) =>\n      from(postContactUs(event.payload.firstname, event.payload.lastname, event.payload.email, event.payload.messsage)).pipe(\n        exhaustMap(apiResponse =>\n          of(\n            apiResponse.statusCode === 200 ? contactUsReceivedEvent(apiResponse.data) : contactUsErroredEvent(apiResponse.data),\n            apiResponse.statusCode === 200 ? getSuccessNotification() : getErrorNotification(''),\n          )\n        ),\n        catchError(() => of(contactUsErroredEvent({\n          contactUsData: undefined,\n          error: 'Network error',\n          errorDescription: 'Check your network connection'\n        })))\n      )\n    )\n  )\n\nexport default [contactUsRequestedEpic]\n"]},"metadata":{},"sourceType":"module"}