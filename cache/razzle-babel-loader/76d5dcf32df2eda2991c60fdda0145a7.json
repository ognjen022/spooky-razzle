{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { createReducer } from '@reduxjs/toolkit';\nimport { PurchaseOption } from './models';\nimport * as eventTypes from './eventTypes';\nimport * as userSecurityEventTypes from '../../userSecurity/token/eventTypes';\nconst initialState = {\n  showModal: false,\n  tagInfo: {},\n  purchaseOption: PurchaseOption.WatchItAll,\n  tagId: undefined,\n  eventId: undefined,\n  isSaving: false,\n  cardToken: undefined,\n  promoCode: undefined,\n  promoCoupon: undefined,\n  checkingPromo: false\n};\nconst purchaseReducer = createReducer(initialState, {\n  [userSecurityEventTypes.USERSECURITY_TOKEN_REMOVED]: state => _objectSpread({}, initialState),\n  [eventTypes.PAYMENTS_PURCHASE_SHOWMODAL_TOGGLED]: (state, action) => {\n    var _action$payload, _action$payload$value, _action$payload$value2, _action$payload2, _action$payload2$valu, _action$payload2$valu2;\n\n    return _objectSpread(_objectSpread({}, state), {}, {\n      showModal: !state.showModal,\n      isSaving: !state.showModal ? false : state.isSaving,\n      tagInfo: {\n        tagStripeProductId: (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : (_action$payload$value = _action$payload.value) === null || _action$payload$value === void 0 ? void 0 : (_action$payload$value2 = _action$payload$value.tagInfo) === null || _action$payload$value2 === void 0 ? void 0 : _action$payload$value2.stripeProductId,\n        pricing: (_action$payload2 = action.payload) === null || _action$payload2 === void 0 ? void 0 : (_action$payload2$valu = _action$payload2.value) === null || _action$payload2$valu === void 0 ? void 0 : (_action$payload2$valu2 = _action$payload2$valu.tagInfo) === null || _action$payload2$valu2 === void 0 ? void 0 : _action$payload2$valu2.pricing\n      },\n      tagId: action.payload.value.tagId,\n      eventId: action.payload.value.eventId\n    });\n  },\n  [eventTypes.PAYMENTS_PURCHASE_TAG_REQUESTED]: (state, action) => {\n    return _objectSpread(_objectSpread({}, state), {}, {\n      cardToken: action.payload.value,\n      isSaving: true\n    });\n  },\n  [eventTypes.PAYMENTS_PURCHASE_WATCHITALL_REQUESTED]: (state, action) => {\n    return _objectSpread(_objectSpread({}, state), {}, {\n      cardToken: action.payload.value.cardToken,\n      promoCode: action.payload.value.promoCode,\n      isSaving: true\n    });\n  },\n  [eventTypes.PAYMENTS_PURCHASE_GAMEPASS_REQUESTED]: (state, action) => {\n    return _objectSpread(_objectSpread({}, state), {}, {\n      cardToken: action.payload.value,\n      isSaving: true\n    });\n  },\n  [eventTypes.PAYMENTS_PURCHASE_TAG_RECEIVED]: state => _objectSpread(_objectSpread({}, initialState), {}, {\n    tagId: state.tagId\n  }),\n  [eventTypes.PAYMENTS_PURCHASE_TAG_ERRORED]: (state, action) => {\n    return _objectSpread(_objectSpread({}, state), {}, {\n      cardToken: undefined,\n      promoCode: undefined,\n      isSaving: false\n    });\n  },\n  [eventTypes.PAYMENTS_PURCHASE_PROMOCODE_REQUESTED]: state => {\n    return _objectSpread(_objectSpread({}, state), {}, {\n      checkingPromo: true\n    });\n  },\n  [eventTypes.PAYMENTS_PURCHASE_PROMOCODE_RECEIVED]: (state, action) => {\n    return _objectSpread(_objectSpread({}, state), {}, {\n      promoCoupon: action.payload,\n      checkingPromo: false\n    });\n  },\n  [eventTypes.PAYMENTS_PURCHASE_PROMOCODE_ERRORED]: (state, action) => {\n    return _objectSpread(_objectSpread({}, state), {}, {\n      promoCoupon: {\n        error: 'Invalid promo code'\n      },\n      checkingPromo: false\n    });\n  }\n});\nexport default purchaseReducer;","map":{"version":3,"sources":["/Users/ognjen/Desktop/with-typescript/src/services/payments/purchase/purchaseReducer.ts"],"names":["createReducer","PurchaseOption","eventTypes","userSecurityEventTypes","initialState","showModal","tagInfo","purchaseOption","WatchItAll","tagId","undefined","eventId","isSaving","cardToken","promoCode","promoCoupon","checkingPromo","purchaseReducer","USERSECURITY_TOKEN_REMOVED","state","PAYMENTS_PURCHASE_SHOWMODAL_TOGGLED","action","tagStripeProductId","payload","value","stripeProductId","pricing","PAYMENTS_PURCHASE_TAG_REQUESTED","PAYMENTS_PURCHASE_WATCHITALL_REQUESTED","PAYMENTS_PURCHASE_GAMEPASS_REQUESTED","PAYMENTS_PURCHASE_TAG_RECEIVED","PAYMENTS_PURCHASE_TAG_ERRORED","PAYMENTS_PURCHASE_PROMOCODE_REQUESTED","PAYMENTS_PURCHASE_PROMOCODE_RECEIVED","PAYMENTS_PURCHASE_PROMOCODE_ERRORED","error"],"mappings":"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","sourcesContent":["import { createReducer, Reducer } from '@reduxjs/toolkit'\nimport { PurchaseState, PurchaseOption, PromoInformation } from './models'\nimport { Event } from '../../eventGroups'\n\nimport * as eventTypes from './eventTypes'\nimport * as userSecurityEventTypes from '../../userSecurity/token/eventTypes'\nimport { act } from 'react-dom/test-utils'\n\nconst initialState: PurchaseState = {\n  showModal: false,\n  tagInfo: {},\n  purchaseOption: PurchaseOption.WatchItAll,\n  tagId: undefined,\n  eventId: undefined,\n  isSaving: false,\n  cardToken: undefined,\n  promoCode: undefined,\n  promoCoupon : undefined,\n  checkingPromo: false\n}\n\nconst purchaseReducer: Reducer<PurchaseState> = createReducer(initialState, {\n  [userSecurityEventTypes.USERSECURITY_TOKEN_REMOVED]: (state) => ({ ...initialState }),\n  [eventTypes.PAYMENTS_PURCHASE_SHOWMODAL_TOGGLED]: (state, action: Event<any>) => ({\n    ...state,\n    showModal: !state.showModal,\n    isSaving: !state.showModal ? false : state.isSaving,\n    tagInfo: {\n      tagStripeProductId: action.payload?.value?.tagInfo?.stripeProductId,\n      pricing: action.payload?.value?.tagInfo?.pricing,\n    },\n    tagId: action.payload.value.tagId,\n    eventId: action.payload.value.eventId\n  }),\n  [eventTypes.PAYMENTS_PURCHASE_TAG_REQUESTED]: (state, action: Event<any>) => {\n    return { ...state, cardToken: action.payload.value, isSaving: true }\n  },\n  [eventTypes.PAYMENTS_PURCHASE_WATCHITALL_REQUESTED]: (state, action: Event<any>) => {\n    return { ...state, cardToken: action.payload.value.cardToken, promoCode: action.payload.value.promoCode, isSaving: true }\n  },\n  [eventTypes.PAYMENTS_PURCHASE_GAMEPASS_REQUESTED]: (state, action: Event<any>) => {\n    return { ...state, cardToken: action.payload.value, isSaving: true }\n  },\n  [eventTypes.PAYMENTS_PURCHASE_TAG_RECEIVED]: (state) => ({ ...initialState, tagId: state.tagId }),\n  [eventTypes.PAYMENTS_PURCHASE_TAG_ERRORED]: (state, action: Event<any>) => {\n    return { ...state, cardToken: undefined, promoCode: undefined, isSaving: false }\n  },\n  [eventTypes.PAYMENTS_PURCHASE_PROMOCODE_REQUESTED]: (state) => {\n    return { ...state, checkingPromo: true}\n  },\n  [eventTypes.PAYMENTS_PURCHASE_PROMOCODE_RECEIVED]: (state, action: any) => {\n    return { ...state, promoCoupon: action.payload, checkingPromo: false}\n  },\n  [eventTypes.PAYMENTS_PURCHASE_PROMOCODE_ERRORED]: (state, action: any) => {\n    return { ...state, promoCoupon: {error: 'Invalid promo code' }, checkingPromo: false}\n  }\n})\n\nexport default purchaseReducer\n"]},"metadata":{},"sourceType":"module"}