{"ast":null,"code":"import { from, of } from 'rxjs';\nimport { exhaustMap, filter, catchError } from 'rxjs/operators';\nimport { isActionOf } from 'typesafe-actions';\nimport { profileRequestedEvent, profileReceivedEvent, profileErroredEvent } from '../events';\nimport { getProfile } from '../api/getProfile';\n\nvar profileRequestedEpic = function profileRequestedEpic(action$, store) {\n  return action$.pipe(filter(isActionOf(profileRequestedEvent)), exhaustMap(function () {\n    return from(getProfile()).pipe(exhaustMap(function (apiResponse) {\n      var data = {\n        'userId': apiResponse.data.id,\n        profile: apiResponse.data // comment out\n\n      };\n      window.dataLayer.push(data);\n      return of(profileReceivedEvent(apiResponse.data));\n    }), catchError(function (error) {\n      return of(profileErroredEvent(error));\n    }));\n  }));\n};\n\nexport default [profileRequestedEpic];","map":{"version":3,"sources":["/Users/ognjen/Desktop/with-typescript/src/services/userSecurity/profile/epics/profileRequestedEpic.ts"],"names":["from","of","exhaustMap","filter","catchError","isActionOf","profileRequestedEvent","profileReceivedEvent","profileErroredEvent","getProfile","profileRequestedEpic","action$","store","pipe","apiResponse","data","id","profile","window","dataLayer","push","error"],"mappings":"AACA,SAASA,IAAT,EAAeC,EAAf,QAAyB,MAAzB;AACA,SAASC,UAAT,EAAqBC,MAArB,EAA6BC,UAA7B,QAA+C,gBAA/C;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAA4BC,qBAA5B,EAAmDC,oBAAnD,EAAyEC,mBAAzE,QAAoG,WAApG;AAEA,SAASC,UAAT,QAA2B,mBAA3B;;AAEA,IAAMC,oBAA2E,GAAG,SAA9EA,oBAA8E,CAACC,OAAD,EAAUC,KAAV;AAAA,SAClFD,OAAO,CAACE,IAAR,CACEV,MAAM,CAACE,UAAU,CAACC,qBAAD,CAAX,CADR,EAEEJ,UAAU,CAAC;AAAA,WACTF,IAAI,CAACS,UAAU,EAAX,CAAJ,CAAmBI,IAAnB,CACEX,UAAU,CACR,UAACY,WAAD,EAAiB;AACf,UAAIC,IAAI,GAAG;AACT,kBAAUD,WAAW,CAACC,IAAZ,CAAiBC,EADlB;AAETC,QAAAA,OAAO,EAAEH,WAAW,CAACC,IAFZ,CAEiB;;AAFjB,OAAX;AAICG,MAAAA,MAAD,CAAgBC,SAAhB,CAA0BC,IAA1B,CAA+BL,IAA/B;AACA,aAAOd,EAAE,CAACM,oBAAoB,CAACO,WAAW,CAACC,IAAb,CAArB,CAAT;AACD,KARO,CADZ,EAWEX,UAAU,CAAC,UAACiB,KAAD;AAAA,aAAWpB,EAAE,CAACO,mBAAmB,CAACa,KAAD,CAApB,CAAb;AAAA,KAAD,CAXZ,CADS;AAAA,GAAD,CAFZ,CADkF;AAAA,CAApF;;AAoBA,eAAe,CAACX,oBAAD,CAAf","sourcesContent":["import { Epic } from 'redux-observable'\nimport { from, of } from 'rxjs'\nimport { exhaustMap, filter, catchError } from 'rxjs/operators'\nimport { isActionOf } from 'typesafe-actions'\nimport { ProfileEventTypes, profileRequestedEvent, profileReceivedEvent, profileErroredEvent } from '../events'\nimport { RootState } from '../../../RootState'\nimport { getProfile } from '../api/getProfile'\n\nconst profileRequestedEpic: Epic<ProfileEventTypes, ProfileEventTypes, RootState> = (action$, store) =>\n  action$.pipe(\n    filter(isActionOf(profileRequestedEvent)),\n    exhaustMap(() =>\n      from(getProfile()).pipe(\n        exhaustMap(\n          (apiResponse) => {\n            let data = {\n              'userId': apiResponse.data.id,\n              profile: apiResponse.data // comment out\n            };\n            (window as any).dataLayer.push(data);\n            return of(profileReceivedEvent(apiResponse.data))\n          }\n        ),\n        catchError((error) => of(profileErroredEvent(error)))\n      )\n    )\n  )\n\nexport default [profileRequestedEpic]\n"]},"metadata":{},"sourceType":"module"}