{"ast":null,"code":"var _jsxFileName = \"/Users/ognjen/Desktop/with-typescript/src/components/ResetPasswordForm/ResetPasswordForm.tsx\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { useForm, useField } from 'react-final-form-hooks';\nimport { useDispatch, useSelector } from 'react-redux';\nimport styles from './ResetPasswordForm.module.scss';\nimport Input from '../../components/Input/Input';\nimport Button from '../../components/Button/Button';\nimport { regexStrongPassword } from '../../utils/utils';\nimport { passwordUpdateRequestedEvent } from '../../services/userSecurity/password/events';\nimport { selectError, selectIsSubmitting } from '../../services/userSecurity/password/selectors';\n\nconst ResetPassword = () => {\n  let dispatch = useDispatch();\n  const {\n    0: changeButton,\n    1: setChangeButton\n  } = useState(false);\n  let errorText = useSelector(state => selectError(state.userSecurity.password));\n  let isSubmitting = useSelector(state => selectIsSubmitting(state.userSecurity.password)); // Submit form\n\n  const onSubmit = async payload => {\n    await dispatch(passwordUpdateRequestedEvent(payload.password, payload.confirmPassword));\n    setChangeButton(true);\n  }; // Initial values form\n\n\n  const initialValues = {}; // Create form\n\n  const {\n    form,\n    handleSubmit,\n    dirtySinceLastSubmit\n  } = useForm({\n    onSubmit,\n    validate,\n    initialValues\n  }); // Create form fields\n\n  const password = useField('password', form);\n  const confirmPassword = useField('confirmPassword', form);\n  return __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: styles['account__form'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: styles['account__form-group'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, \"New Password\"), __jsx(Input, {\n    data: password,\n    label: \"password\",\n    type: \"password\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }))), __jsx(\"div\", {\n    className: styles['account__form-group'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, \"Confirm new Password\"), __jsx(Input, {\n    data: confirmPassword,\n    label: \"confirmPassword\",\n    type: \"password\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }))), __jsx(\"div\", {\n    className: styles['account__form-group-button'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, __jsx(\"p\", {\n    className: `text-right ${styles['text-right']}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }, __jsx(Button, {\n    type: \"submit\",\n    variant: \"secondary\",\n    color: changeButton && !isSubmitting && !errorText && !dirtySinceLastSubmit ? 'ghost' : 'success',\n    label: changeButton && !isSubmitting && !errorText && !dirtySinceLastSubmit ? 'Saved' : 'Save',\n    isLoading: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }), errorText !== undefined && errorText.length > 0 && __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 15\n    }\n  }, errorText)))));\n};\n\nexport const validate = values => {\n  const errors = {\n    password: undefined,\n    confirmPassword: undefined\n  }; // Password validations\n\n  if (!values.password) {\n    errors.password = 'Enter your password';\n  } else if (values.password && values.password.length < 8) {\n    errors.password = 'Password must have at least 8 characters';\n  } else if (!regexStrongPassword.test(values.password)) {\n    errors.password = 'Password must inlude an upper and lower case letter, a number and a special character';\n  } else if (values.password && values.password.length > 128) {\n    errors.password = 'Password must have less than 128 characters';\n  } // Confirm Password validations\n\n\n  if (values.confirmPassword !== values.password) {\n    errors.confirmPassword = 'Passwords do not match';\n  }\n\n  return errors;\n};\nexport default ResetPassword;","map":{"version":3,"sources":["/Users/ognjen/Desktop/with-typescript/src/components/ResetPasswordForm/ResetPasswordForm.tsx"],"names":["React","useState","useForm","useField","useDispatch","useSelector","styles","Input","Button","regexStrongPassword","passwordUpdateRequestedEvent","selectError","selectIsSubmitting","ResetPassword","dispatch","changeButton","setChangeButton","errorText","state","userSecurity","password","isSubmitting","onSubmit","payload","confirmPassword","initialValues","form","handleSubmit","dirtySinceLastSubmit","validate","undefined","length","values","errors","test"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useForm, useField } from 'react-final-form-hooks'\nimport { useDispatch, useSelector } from 'react-redux'\n\nimport styles from './ResetPasswordForm.module.scss'\n\nimport Input from '../../components/Input/Input'\nimport Button from '../../components/Button/Button'\n\nimport { regexStrongPassword } from '../../utils/utils'\nimport { passwordUpdateRequestedEvent } from '../../services/userSecurity/password/events'\nimport { RootState } from '../../services/RootState'\nimport { selectError, selectIsSubmitting } from '../../services/userSecurity/password/selectors'\n\nexport interface IResetPasswordFormValues {\n  password: string | undefined\n  confirmPassword: string | undefined\n}\n\nconst ResetPassword = () => {\n  let dispatch = useDispatch()\n\n  const [changeButton, setChangeButton] = useState(false)\n\n  let errorText = useSelector<RootState, string>(state => selectError(state.userSecurity.password))\n  let isSubmitting = useSelector<RootState, boolean>(state => selectIsSubmitting(state.userSecurity.password))\n\n\n  // Submit form\n  const onSubmit = async (payload: any) => {\n    await dispatch(passwordUpdateRequestedEvent(payload.password, payload.confirmPassword))\n    setChangeButton(true);\n  }\n\n  // Initial values form\n  const initialValues: Partial<IResetPasswordFormValues> = {\n\n  }\n\n  // Create form\n  const { form, handleSubmit, dirtySinceLastSubmit } = useForm({ onSubmit, validate, initialValues })\n\n  // Create form fields\n  const password = useField('password', form)\n  const confirmPassword = useField('confirmPassword', form)\n\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div className={styles['account__form']}>\n        <div className={styles['account__form-group']}>\n          <p>\n            <label htmlFor=\"\">New Password</label>\n            <Input data={password} label=\"password\" type=\"password\" required />\n          </p>\n        </div>\n        <div className={styles['account__form-group']}>\n          <p>\n            <label htmlFor=\"\">Confirm new Password</label>\n            <Input data={confirmPassword} label=\"confirmPassword\" type=\"password\" required />\n          </p>\n        </div>\n        <div className={styles['account__form-group-button']}>\n          <p className={`text-right ${styles['text-right']}`}>\n            <Button\n              type=\"submit\"\n              variant={\"secondary\"}\n              color={changeButton && !isSubmitting && !errorText && !dirtySinceLastSubmit ? 'ghost' : 'success'}\n              label={changeButton && !isSubmitting && !errorText && !dirtySinceLastSubmit ? 'Saved' : 'Save'}\n              isLoading={isSubmitting}\n            />\n            {errorText !== undefined && errorText.length > 0 &&\n              <span>{errorText}</span>\n            }\n          </p>\n        </div>\n      </div>\n    </form>\n  )\n}\n\nexport const validate = (values: IResetPasswordFormValues) => {\n  const errors: IResetPasswordFormValues = {\n    password: undefined,\n    confirmPassword: undefined\n  }\n\n  // Password validations\n  if (!values.password) {\n    errors.password = 'Enter your password'\n  } else if (values.password && values.password.length < 8) {\n    errors.password = 'Password must have at least 8 characters'\n  } else if (!regexStrongPassword.test(values.password)) {\n    errors.password = 'Password must inlude an upper and lower case letter, a number and a special character'\n  } else if (values.password && values.password.length > 128) {\n    errors.password = 'Password must have less than 128 characters'\n  }\n\n  // Confirm Password validations\n  if (values.confirmPassword !== values.password) {\n    errors.confirmPassword = 'Passwords do not match'\n  }\n\n  return errors\n}\n\nexport default ResetPassword\n"]},"metadata":{},"sourceType":"module"}