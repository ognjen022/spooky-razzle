{"ast":null,"code":"var _jsxFileName = \"/Users/ognjen/Desktop/spooky-live-ssr/ui/src/components/HeroCarouselVideo/HeroCarouselVideo.tsx\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport moment from 'moment';\nimport { filterFeaturedStreams } from '../../services/content/tags/selectors';\nimport SaveStreamButton from '../SaveButtons/SaveStreamButton';\nimport PremiumContent from '../../components/PremiumContent/PremiumContent';\nimport { Link } from 'react-router-dom';\nimport LazyImage from '../LazyImage/LazyImage';\nimport Glide from '@glidejs/glide';\nimport { push } from 'connected-react-router';\nimport { useDispatch } from 'react-redux';\nimport { truncateString } from '../../utils/utils';\n\nconst HeroCarouselVideo = props => {\n  var _props$filterTag, _props$filterTag2;\n\n  const dispatch = useDispatch();\n  const {\n    0: currentStreamIndex,\n    1: setCurrentStreamIndex\n  } = useState(0);\n  const filteredStreams = filterFeaturedStreams(props.streams, props.limit, props.filterTag); //const x = filterFeaturedStreams(props.streams, props.limit, props.filterTag)\n\n  const {\n    0: heroGlide,\n    1: setheroGlide\n  } = useState(new Glide());\n  const mainTag = props.mainTag;\n  useEffect(() => {\n    if (filteredStreams.length > 0) {\n      if (window.__NewGlide) {\n        const heroCarouselVideoGlide = window.__NewGlide(`.hero-carousel-video .glide`, {\n          type: 'carousel',\n          hoverpause: true,\n          perView: 1,\n          gap: 0,\n          animationTimingFunc: 'ease-in-out',\n          animationDuration: 1000,\n          dragThreshold: filteredStreams.length > 1 ? true : false,\n          peek: {\n            before: 0,\n            after: filteredStreams.length > 1 ? 140 : 0\n          }\n        });\n\n        if (heroCarouselVideoGlide) {\n          heroCarouselVideoGlide.on(['mount.after', 'run'], function () {\n            const index = heroCarouselVideoGlide.index;\n            setCurrentStreamIndex(index);\n            setheroGlide(heroCarouselVideoGlide);\n          });\n          heroCarouselVideoGlide.mount();\n        }\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, []);\n\n  const handleImageClick = index => {\n    if (heroGlide.index === index) dispatch(push(`/play/${filteredStreams[index].eventId}`));\n  };\n\n  if (mainTag === undefined || (filteredStreams === null || filteredStreams === void 0 ? void 0 : filteredStreams.length) === 0) return __jsx(React.Fragment, null);\n\n  const cropImageIfMobile = imageUri => {\n    const toMatch = [/Android/i, /webOS/i, /iPhone/i, /iPad/i, /iPod/i, /BlackBerry/i, /Windows Phone/i];\n\n    if (toMatch.some(item => navigator.userAgent.match(item))) {\n      return `${imageUri}?width=640&height=360&mode=crop`;\n    }\n\n    return `${imageUri}?width=2560&height=1440&mode=crop`;\n  };\n\n  const renderSlide = (stream, index) => __jsx(\"li\", {\n    className: 'glide__slide',\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: 'hero-carousel-video__image',\n    onClick: () => handleImageClick(index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }\n  }, __jsx(LazyImage, {\n    src: cropImageIfMobile(stream.image ? `${stream.image}` : 'https://via.placeholder.com/2560x1440.png'),\n    alt: stream.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  })), __jsx(\"div\", {\n    className: 'hero-carousel-video__content',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: 'hero-carousel-video__title',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, __jsx(Link, {\n    to: `/play/${stream.eventId}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 48\n    }\n  }, truncateString(stream.name, 50)))), __jsx(\"div\", {\n    className: 'hero-carousel-video__intro',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }, stream.description || '')), __jsx(\"div\", {\n    className: 'hero-carousel-video__video-options',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: 'hero-carousel-video__video-options-premium',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, __jsx(PremiumContent, {\n    stream: stream,\n    className: 'icon',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  })), __jsx(SaveStreamButton, {\n    stream: stream,\n    suffix: \"to My Stream\",\n    className: 'hero-carousel-video__video-options-toggle',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }))), __jsx(\"div\", {\n    className: 'hero-carousel-video__date-time',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  }, moment(stream.startTime).format('ddd Do MMM YYYY - h.mm A'))));\n\n  return __jsx(\"section\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: 'container',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: 'hero-carousel-video',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: 'hero-carousel-video__label',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }, __jsx(Link, {\n    to: `${(_props$filterTag = props.filterTag) === null || _props$filterTag === void 0 ? void 0 : _props$filterTag.path}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 15\n    }\n  }, (_props$filterTag2 = props.filterTag) === null || _props$filterTag2 === void 0 ? void 0 : _props$filterTag2.name))), __jsx(\"div\", {\n    className: 'hero-carousel-video__slider',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: 'glide',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: 'glide__track',\n    \"data-glide-el\": 'track',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 15\n    }\n  }, __jsx(\"ul\", {\n    className: `glide__slides`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 17\n    }\n  }, filteredStreams.map((stream, index) => renderSlide(stream, index)))), filteredStreams.length > 1 && __jsx(\"div\", {\n    \"data-glide-el\": \"controls\",\n    className: 'glide__arrows',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }, __jsx(\"button\", {\n    \"data-glide-dir\": \"<\",\n    className: 'glide__button-prev',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 19\n    }\n  }, __jsx(\"svg\", {\n    className: 'icon',\n    role: 'presentation',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 21\n    }\n  }, __jsx(\"use\", {\n    xlinkHref: '#icon-chevron-left',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 23\n    }\n  })), __jsx(\"span\", {\n    className: 'screen-reader-text',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 21\n    }\n  }, \"Previous Slide\")), __jsx(\"button\", {\n    \"data-glide-dir\": \">\",\n    className: 'glide__button-next',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 19\n    }\n  }, __jsx(\"svg\", {\n    className: 'icon',\n    role: 'presentation',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 21\n    }\n  }, __jsx(\"use\", {\n    xlinkHref: '#icon-chevron-right',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 23\n    }\n  })), __jsx(\"span\", {\n    className: 'screen-reader-text',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 21\n    }\n  }, \"Next Slide\"))))), __jsx(\"div\", {\n    className: 'hero-carousel-video__counter',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 11\n    }\n  }, __jsx(\"span\", {\n    className: 'hero-carousel-video__counter-current',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }\n  }, \" \", currentStreamIndex + 1, \" \"), \" / \", __jsx(\"span\", {\n    className: 'hero-carousel-video__counter-total',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 106\n    }\n  }, \" \", filteredStreams.length, \" \")))));\n};\n\nexport default HeroCarouselVideo;","map":{"version":3,"sources":["/Users/ognjen/Desktop/spooky-live-ssr/ui/src/components/HeroCarouselVideo/HeroCarouselVideo.tsx"],"names":["React","useEffect","useState","moment","filterFeaturedStreams","SaveStreamButton","PremiumContent","Link","LazyImage","Glide","push","useDispatch","truncateString","HeroCarouselVideo","props","dispatch","currentStreamIndex","setCurrentStreamIndex","filteredStreams","streams","limit","filterTag","heroGlide","setheroGlide","mainTag","length","window","__NewGlide","heroCarouselVideoGlide","type","hoverpause","perView","gap","animationTimingFunc","animationDuration","dragThreshold","peek","before","after","on","index","mount","handleImageClick","eventId","undefined","cropImageIfMobile","imageUri","toMatch","some","item","navigator","userAgent","match","renderSlide","stream","image","name","description","startTime","format","path","map"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport moment from 'moment'\n\nimport { ITag, IStream } from '../../services/content/tags/models'\nimport { filterFeaturedStreams, filterStreams } from '../../services/content/tags/selectors'\n\nimport SaveStreamButton from '../SaveButtons/SaveStreamButton'\nimport PremiumContent from '../../components/PremiumContent/PremiumContent'\nimport { Link } from 'react-router-dom'\nimport LazyImage from '../LazyImage/LazyImage'\nimport Glide from '@glidejs/glide'\nimport { push } from 'connected-react-router';\nimport { useDispatch } from 'react-redux';\nimport { truncateString } from '../../utils/utils'\n\ninterface IHeroCarouselVideoProps {\n  mainTag: ITag | undefined\n  streams: IStream[]\n  filterTag: ITag | undefined\n  limit: number\n}\n\nconst HeroCarouselVideo: React.FC<IHeroCarouselVideoProps> = (props) => {\n\n  const dispatch = useDispatch();\n  const [currentStreamIndex, setCurrentStreamIndex] = useState(0)\n  const filteredStreams = filterFeaturedStreams(props.streams, props.limit, props.filterTag)\n  //const x = filterFeaturedStreams(props.streams, props.limit, props.filterTag)\n  const [heroGlide, setheroGlide]: any = useState(new Glide());\n\n  const mainTag = props.mainTag\n\n  useEffect(() => {\n    if (filteredStreams.length > 0) {\n\n      if ((window as any).__NewGlide) {\n        const heroCarouselVideoGlide: any = (window as any).__NewGlide(`.hero-carousel-video .glide`, {\n          type: 'carousel',\n          hoverpause: true,\n          perView: 1,\n          gap: 0,\n          animationTimingFunc: 'ease-in-out',\n          animationDuration: 1000,\n          dragThreshold: filteredStreams.length > 1 ? true : false,\n          peek: {\n            before: 0,\n            after: filteredStreams.length > 1 ? 140 : 0\n          }\n        })\n\n        if (heroCarouselVideoGlide) {\n          heroCarouselVideoGlide.on(['mount.after', 'run'], function () {\n            const index = heroCarouselVideoGlide.index;\n            setCurrentStreamIndex(index);\n            setheroGlide(heroCarouselVideoGlide)\n          });\n\n          heroCarouselVideoGlide.mount()\n        }\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleImageClick = (index) => {\n    if (heroGlide.index === index)\n      dispatch(push(`/play/${filteredStreams[index].eventId}`))\n  }\n\n  if (mainTag === undefined || filteredStreams?.length === 0) return <></>\n\n  const cropImageIfMobile = (imageUri: string): string => {\n    const toMatch = [\n      /Android/i,\n      /webOS/i,\n      /iPhone/i,\n      /iPad/i,\n      /iPod/i,\n      /BlackBerry/i,\n      /Windows Phone/i\n    ];\n    if (toMatch.some((item) => navigator.userAgent.match(item))) {\n      return `${imageUri}?width=640&height=360&mode=crop`\n    }\n    return `${imageUri}?width=2560&height=1440&mode=crop`;\n  }\n  const renderSlide = (stream: IStream, index: number) => (\n    <li className={'glide__slide'} key={index}>\n      <div className={'hero-carousel-video__image'} onClick={() => handleImageClick(index)}>\n        <LazyImage src={cropImageIfMobile(stream.image ? `${stream.image}` : 'https://via.placeholder.com/2560x1440.png')} alt={stream.name} />\n      </div>\n      <div className={'hero-carousel-video__content'}>\n        <div className={'hero-carousel-video__title'}>\n          <Link to={`/play/${stream.eventId}`}><h2>{truncateString(stream.name, 50)}</h2></Link>\n        </div>\n        <div className={'hero-carousel-video__intro'}>\n          <p>{stream.description || ''}</p>\n        </div>\n        <div className={'hero-carousel-video__video-options'}>\n\n          <div className={'hero-carousel-video__video-options-premium'}>\n            <PremiumContent stream={stream} className={'icon'} />\n          </div>\n\n          <SaveStreamButton stream={stream} suffix=\"to My Stream\" className={'hero-carousel-video__video-options-toggle'} ></SaveStreamButton>\n\n        </div>\n      </div>\n      <div className={'hero-carousel-video__date-time'}>\n        <p>{moment(stream.startTime).format('ddd Do MMM YYYY - h.mm A')}</p>\n      </div>\n    </li>\n  )\n\n\n  return (\n    <section>\n      <div className={'container'}>\n        <div className={'hero-carousel-video'}>\n          <div className={'hero-carousel-video__label'}>\n            <Link to={`${props.filterTag?.path}`}>\n              <p>{props.filterTag?.name}</p>\n            </Link>\n          </div>\n          <div className={'hero-carousel-video__slider'}>\n            <div className={'glide'}>\n              <div className={'glide__track'} data-glide-el={'track'}>\n                <ul className={`glide__slides`}>\n                  {filteredStreams.map((stream, index) =>\n                    renderSlide(stream, index)\n                  )}\n                </ul>\n              </div>\n              {filteredStreams.length > 1 &&\n                <div data-glide-el=\"controls\" className={'glide__arrows'}>\n                  <button data-glide-dir=\"<\" className={'glide__button-prev'}>\n                    <svg className={'icon'} role={'presentation'}>\n                      <use xlinkHref={'#icon-chevron-left'}></use>\n                    </svg>\n                    <span className={'screen-reader-text'}>Previous Slide</span>\n                  </button>\n                  <button data-glide-dir=\">\" className={'glide__button-next'}>\n                    <svg className={'icon'} role={'presentation'}>\n                      <use xlinkHref={'#icon-chevron-right'}></use>\n                    </svg>\n                    <span className={'screen-reader-text'}>Next Slide</span>\n                  </button>\n                </div>\n              }\n            </div>\n          </div>\n          <div className={'hero-carousel-video__counter'}>\n            <span className={'hero-carousel-video__counter-current'}> {currentStreamIndex + 1} </span> / <span className={'hero-carousel-video__counter-total'}> {filteredStreams.length} </span>\n          </div>\n        </div>\n      </div>\n    </section>\n  )\n}\n\nexport default HeroCarouselVideo\n"]},"metadata":{},"sourceType":"module"}