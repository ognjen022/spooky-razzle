{"ast":null,"code":"import _defineProperty from \"/Users/ognjen/Desktop/with-typescript/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/ognjen/Desktop/with-typescript/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\nvar _createReducer;\n\nimport { createReducer } from '@reduxjs/toolkit';\nimport { PurchaseOption } from './models';\nimport * as eventTypes from './eventTypes';\nimport * as userSecurityEventTypes from '../../userSecurity/token/eventTypes';\nvar initialState = {\n  showModal: false,\n  tagInfo: {},\n  purchaseOption: PurchaseOption.WatchItAll,\n  tagId: undefined,\n  eventId: undefined,\n  isSaving: false,\n  cardToken: undefined,\n  promoCode: undefined,\n  promoCoupon: undefined,\n  checkingPromo: false\n};\nvar purchaseReducer = createReducer(initialState, (_createReducer = {}, _defineProperty(_createReducer, userSecurityEventTypes.USERSECURITY_TOKEN_REMOVED, function (state) {\n  return _objectSpread({}, initialState);\n}), _defineProperty(_createReducer, eventTypes.PAYMENTS_PURCHASE_SHOWMODAL_TOGGLED, function (state, action) {\n  var _action$payload, _action$payload$value, _action$payload$value2, _action$payload2, _action$payload2$valu, _action$payload2$valu2;\n\n  return _objectSpread(_objectSpread({}, state), {}, {\n    showModal: !state.showModal,\n    isSaving: !state.showModal ? false : state.isSaving,\n    tagInfo: {\n      tagStripeProductId: (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : (_action$payload$value = _action$payload.value) === null || _action$payload$value === void 0 ? void 0 : (_action$payload$value2 = _action$payload$value.tagInfo) === null || _action$payload$value2 === void 0 ? void 0 : _action$payload$value2.stripeProductId,\n      pricing: (_action$payload2 = action.payload) === null || _action$payload2 === void 0 ? void 0 : (_action$payload2$valu = _action$payload2.value) === null || _action$payload2$valu === void 0 ? void 0 : (_action$payload2$valu2 = _action$payload2$valu.tagInfo) === null || _action$payload2$valu2 === void 0 ? void 0 : _action$payload2$valu2.pricing\n    },\n    tagId: action.payload.value.tagId,\n    eventId: action.payload.value.eventId\n  });\n}), _defineProperty(_createReducer, eventTypes.PAYMENTS_PURCHASE_TAG_REQUESTED, function (state, action) {\n  return _objectSpread(_objectSpread({}, state), {}, {\n    cardToken: action.payload.value,\n    isSaving: true\n  });\n}), _defineProperty(_createReducer, eventTypes.PAYMENTS_PURCHASE_WATCHITALL_REQUESTED, function (state, action) {\n  return _objectSpread(_objectSpread({}, state), {}, {\n    cardToken: action.payload.value.cardToken,\n    promoCode: action.payload.value.promoCode,\n    isSaving: true\n  });\n}), _defineProperty(_createReducer, eventTypes.PAYMENTS_PURCHASE_GAMEPASS_REQUESTED, function (state, action) {\n  return _objectSpread(_objectSpread({}, state), {}, {\n    cardToken: action.payload.value,\n    isSaving: true\n  });\n}), _defineProperty(_createReducer, eventTypes.PAYMENTS_PURCHASE_TAG_RECEIVED, function (state) {\n  return _objectSpread(_objectSpread({}, initialState), {}, {\n    tagId: state.tagId\n  });\n}), _defineProperty(_createReducer, eventTypes.PAYMENTS_PURCHASE_TAG_ERRORED, function (state, action) {\n  return _objectSpread(_objectSpread({}, state), {}, {\n    cardToken: undefined,\n    promoCode: undefined,\n    isSaving: false\n  });\n}), _defineProperty(_createReducer, eventTypes.PAYMENTS_PURCHASE_PROMOCODE_REQUESTED, function (state) {\n  return _objectSpread(_objectSpread({}, state), {}, {\n    checkingPromo: true\n  });\n}), _defineProperty(_createReducer, eventTypes.PAYMENTS_PURCHASE_PROMOCODE_RECEIVED, function (state, action) {\n  return _objectSpread(_objectSpread({}, state), {}, {\n    promoCoupon: action.payload,\n    checkingPromo: false\n  });\n}), _defineProperty(_createReducer, eventTypes.PAYMENTS_PURCHASE_PROMOCODE_ERRORED, function (state, action) {\n  return _objectSpread(_objectSpread({}, state), {}, {\n    promoCoupon: {\n      error: 'Invalid promo code'\n    },\n    checkingPromo: false\n  });\n}), _createReducer));\nexport default purchaseReducer;","map":{"version":3,"sources":["/Users/ognjen/Desktop/with-typescript/src/services/payments/purchase/purchaseReducer.ts"],"names":["createReducer","PurchaseOption","eventTypes","userSecurityEventTypes","initialState","showModal","tagInfo","purchaseOption","WatchItAll","tagId","undefined","eventId","isSaving","cardToken","promoCode","promoCoupon","checkingPromo","purchaseReducer","USERSECURITY_TOKEN_REMOVED","state","PAYMENTS_PURCHASE_SHOWMODAL_TOGGLED","action","tagStripeProductId","payload","value","stripeProductId","pricing","PAYMENTS_PURCHASE_TAG_REQUESTED","PAYMENTS_PURCHASE_WATCHITALL_REQUESTED","PAYMENTS_PURCHASE_GAMEPASS_REQUESTED","PAYMENTS_PURCHASE_TAG_RECEIVED","PAYMENTS_PURCHASE_TAG_ERRORED","PAYMENTS_PURCHASE_PROMOCODE_REQUESTED","PAYMENTS_PURCHASE_PROMOCODE_RECEIVED","PAYMENTS_PURCHASE_PROMOCODE_ERRORED","error"],"mappings":"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","sourcesContent":["import { createReducer, Reducer } from '@reduxjs/toolkit'\nimport { PurchaseState, PurchaseOption, PromoInformation } from './models'\nimport { Event } from '../../eventGroups'\n\nimport * as eventTypes from './eventTypes'\nimport * as userSecurityEventTypes from '../../userSecurity/token/eventTypes'\nimport { act } from 'react-dom/test-utils'\n\nconst initialState: PurchaseState = {\n  showModal: false,\n  tagInfo: {},\n  purchaseOption: PurchaseOption.WatchItAll,\n  tagId: undefined,\n  eventId: undefined,\n  isSaving: false,\n  cardToken: undefined,\n  promoCode: undefined,\n  promoCoupon : undefined,\n  checkingPromo: false\n}\n\nconst purchaseReducer: Reducer<PurchaseState> = createReducer(initialState, {\n  [userSecurityEventTypes.USERSECURITY_TOKEN_REMOVED]: (state) => ({ ...initialState }),\n  [eventTypes.PAYMENTS_PURCHASE_SHOWMODAL_TOGGLED]: (state, action: Event<any>) => ({\n    ...state,\n    showModal: !state.showModal,\n    isSaving: !state.showModal ? false : state.isSaving,\n    tagInfo: {\n      tagStripeProductId: action.payload?.value?.tagInfo?.stripeProductId,\n      pricing: action.payload?.value?.tagInfo?.pricing,\n    },\n    tagId: action.payload.value.tagId,\n    eventId: action.payload.value.eventId\n  }),\n  [eventTypes.PAYMENTS_PURCHASE_TAG_REQUESTED]: (state, action: Event<any>) => {\n    return { ...state, cardToken: action.payload.value, isSaving: true }\n  },\n  [eventTypes.PAYMENTS_PURCHASE_WATCHITALL_REQUESTED]: (state, action: Event<any>) => {\n    return { ...state, cardToken: action.payload.value.cardToken, promoCode: action.payload.value.promoCode, isSaving: true }\n  },\n  [eventTypes.PAYMENTS_PURCHASE_GAMEPASS_REQUESTED]: (state, action: Event<any>) => {\n    return { ...state, cardToken: action.payload.value, isSaving: true }\n  },\n  [eventTypes.PAYMENTS_PURCHASE_TAG_RECEIVED]: (state) => ({ ...initialState, tagId: state.tagId }),\n  [eventTypes.PAYMENTS_PURCHASE_TAG_ERRORED]: (state, action: Event<any>) => {\n    return { ...state, cardToken: undefined, promoCode: undefined, isSaving: false }\n  },\n  [eventTypes.PAYMENTS_PURCHASE_PROMOCODE_REQUESTED]: (state) => {\n    return { ...state, checkingPromo: true}\n  },\n  [eventTypes.PAYMENTS_PURCHASE_PROMOCODE_RECEIVED]: (state, action: any) => {\n    return { ...state, promoCoupon: action.payload, checkingPromo: false}\n  },\n  [eventTypes.PAYMENTS_PURCHASE_PROMOCODE_ERRORED]: (state, action: any) => {\n    return { ...state, promoCoupon: {error: 'Invalid promo code' }, checkingPromo: false}\n  }\n})\n\nexport default purchaseReducer\n"]},"metadata":{},"sourceType":"module"}