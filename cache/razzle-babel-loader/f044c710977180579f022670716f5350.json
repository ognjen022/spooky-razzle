{"ast":null,"code":"var _jsxFileName = \"/Users/ognjen/Desktop/with-typescript/src/components/PlayButton/PlayButton.tsx\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { VideoStreamStatus } from '../../services/content/tags/models';\nimport { getAccessToken } from '../../services/shared/tokenLocalStorage';\nimport { withRouter, useHistory } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { showPurchaseModalToggledEvent } from '../../services/payments/purchase/events';\nimport { selectVideoStreamStatus } from '../../services/content/tags/selectors';\nimport moment from 'moment';\nimport { accountToggleLoginEvent } from '../../services/userSecurity/accountDetails/events';\n\nconst PlayButton = ({\n  stream,\n  className,\n  playStream,\n  history,\n  mobileRedirectUrl\n}) => {\n  const currentDate = new Date();\n  const streamDate = new Date(stream.startTime);\n  const validStartTime = streamDate < currentDate;\n  const dispatch = useDispatch();\n  const streamStatus = useSelector(state => selectVideoStreamStatus(state, stream));\n  const router = useHistory();\n\n  const handlePlayStream = () => {\n    const token = getAccessToken();\n\n    if (streamStatus === VideoStreamStatus.FreeNotLoggedIn || streamStatus === VideoStreamStatus.NotPurchasedNotLoggedIn || streamStatus === VideoStreamStatus.NotPurchased) {\n      dispatch(accountToggleLoginEvent(() => showPurchaseModalToggledEvent({}, undefined, stream === null || stream === void 0 ? void 0 : stream.eventId))); //dispatch(showPurchaseModalToggledEvent({}, undefined, stream?.eventId))\n    } else if (streamStatus === VideoStreamStatus.Free || streamStatus === VideoStreamStatus.Purchased) {\n      if (mobileRedirectUrl) {\n        router.push(mobileRedirectUrl); //window.location.href = mobileRedirectUrl\n      } else {\n        playStream();\n      }\n    }\n  };\n\n  if (!stream || moment().isBefore(moment(stream.startTime))) {\n    return __jsx(React.Fragment, null);\n  } else return __jsx(\"div\", {\n    role: \"button\",\n    className: className,\n    onClick: handlePlayStream,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, __jsx(\"svg\", {\n    className: \"icon\",\n    role: \"presentation\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, __jsx(\"use\", {\n    xlinkHref: \"#icon-play\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default withRouter(PlayButton);","map":{"version":3,"sources":["/Users/ognjen/Desktop/with-typescript/src/components/PlayButton/PlayButton.tsx"],"names":["React","VideoStreamStatus","getAccessToken","withRouter","useHistory","useDispatch","useSelector","showPurchaseModalToggledEvent","selectVideoStreamStatus","moment","accountToggleLoginEvent","PlayButton","stream","className","playStream","history","mobileRedirectUrl","currentDate","Date","streamDate","startTime","validStartTime","dispatch","streamStatus","state","router","handlePlayStream","token","FreeNotLoggedIn","NotPurchasedNotLoggedIn","NotPurchased","undefined","eventId","Free","Purchased","push","isBefore"],"mappings":";;AAAA,OAAOA,KAAP,MAAqC,OAArC;AACA,SAAkBC,iBAAlB,QAA2C,oCAA3C;AACA,SAASC,cAAT,QAA+B,yCAA/B;AACA,SAASC,UAAT,EAA0CC,UAA1C,QAA4D,kBAA5D;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AAEA,SAASC,6BAAT,QAA8C,yCAA9C;AAEA,SAASC,uBAAT,QAAwC,uCAAxC;AACA,OAAOC,MAAP,MAAmB,QAAnB;AAEA,SAASC,uBAAT,QAAwC,mDAAxC;;AASA,MAAMC,UAAqC,GAAG,CAAC;AAAEC,EAAAA,MAAF;AAAUC,EAAAA,SAAV;AAAqBC,EAAAA,UAArB;AAAiCC,EAAAA,OAAjC;AAA0CC,EAAAA;AAA1C,CAAD,KAAmE;AAC/G,QAAMC,WAAW,GAAG,IAAIC,IAAJ,EAApB;AACA,QAAMC,UAAU,GAAG,IAAID,IAAJ,CAASN,MAAM,CAACQ,SAAhB,CAAnB;AACA,QAAMC,cAAc,GAAGF,UAAU,GAAGF,WAApC;AACA,QAAMK,QAAQ,GAAGjB,WAAW,EAA5B;AACA,QAAMkB,YAAY,GAAGjB,WAAW,CAA+BkB,KAAK,IAAIhB,uBAAuB,CAACgB,KAAD,EAAQZ,MAAR,CAA/D,CAAhC;AACA,QAAMa,MAAM,GAAGrB,UAAU,EAAzB;;AACA,QAAMsB,gBAAgB,GAAG,MAAM;AAC7B,UAAMC,KAAK,GAAGzB,cAAc,EAA5B;;AACA,QAAIqB,YAAY,KAAKtB,iBAAiB,CAAC2B,eAAnC,IAAsDL,YAAY,KAAKtB,iBAAiB,CAAC4B,uBAAzF,IAAoHN,YAAY,KAAKtB,iBAAiB,CAAC6B,YAA3J,EAAyK;AACvKR,MAAAA,QAAQ,CAACZ,uBAAuB,CAAC,MAAMH,6BAA6B,CAAC,EAAD,EAAKwB,SAAL,EAAgBnB,MAAhB,aAAgBA,MAAhB,uBAAgBA,MAAM,CAAEoB,OAAxB,CAApC,CAAxB,CAAR,CADuK,CAEvK;AACD,KAHD,MAGO,IAAIT,YAAY,KAAKtB,iBAAiB,CAACgC,IAAnC,IAA2CV,YAAY,KAAKtB,iBAAiB,CAACiC,SAAlF,EAA6F;AAClG,UAAIlB,iBAAJ,EAAuB;AACrBS,QAAAA,MAAM,CAACU,IAAP,CAAYnB,iBAAZ,EADqB,CAErB;AACD,OAHD,MAGO;AACLF,QAAAA,UAAU;AACX;AACF;AACF,GAbD;;AAeA,MAAI,CAACF,MAAD,IAAWH,MAAM,GAAG2B,QAAT,CAAkB3B,MAAM,CAACG,MAAM,CAACQ,SAAR,CAAxB,CAAf,EAA4D;AAC1D,WAAO,2BAAP;AACD,GAFD,MAIK,OACH;AAAK,IAAA,IAAI,EAAC,QAAV;AAAmB,IAAA,SAAS,EAAEP,SAA9B;AAAyC,IAAA,OAAO,EAAEa,gBAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAsB,IAAA,IAAI,EAAC,cAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CADG;AAON,CAjCD;;AAmCA,eAAevB,UAAU,CAACQ,UAAD,CAAzB","sourcesContent":["import React, { useDebugValue } from 'react';\nimport { IStream, VideoStreamStatus } from '../../services/content/tags/models'\nimport { getAccessToken } from '../../services/shared/tokenLocalStorage'\nimport { withRouter, RouteComponentProps, useHistory } from 'react-router-dom'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { push, routerActions } from 'connected-react-router'\nimport { showPurchaseModalToggledEvent } from '../../services/payments/purchase/events';\nimport { RootState } from '../../services/RootState';\nimport { selectVideoStreamStatus } from '../../services/content/tags/selectors';\nimport moment from 'moment'\nimport { isIos } from '../../utils/utils';\nimport { accountToggleLoginEvent } from '../../services/userSecurity/accountDetails/events';\n\ninterface PlayButtonProps extends RouteComponentProps {\n  stream: IStream\n  className: string\n  playStream: Function\n  mobileRedirectUrl: string | undefined\n}\n\nconst PlayButton: React.FC<PlayButtonProps> = ({ stream, className, playStream, history, mobileRedirectUrl }) => {\n  const currentDate = new Date();\n  const streamDate = new Date(stream.startTime);\n  const validStartTime = streamDate < currentDate;\n  const dispatch = useDispatch()\n  const streamStatus = useSelector<RootState, VideoStreamStatus>(state => selectVideoStreamStatus(state, stream))\n  const router = useHistory();\n  const handlePlayStream = () => {\n    const token = getAccessToken()\n    if (streamStatus === VideoStreamStatus.FreeNotLoggedIn || streamStatus === VideoStreamStatus.NotPurchasedNotLoggedIn || streamStatus === VideoStreamStatus.NotPurchased) {\n      dispatch(accountToggleLoginEvent(() => showPurchaseModalToggledEvent({}, undefined, stream?.eventId)));\n      //dispatch(showPurchaseModalToggledEvent({}, undefined, stream?.eventId))\n    } else if (streamStatus === VideoStreamStatus.Free || streamStatus === VideoStreamStatus.Purchased) {\n      if (mobileRedirectUrl) {\n        router.push(mobileRedirectUrl);\n        //window.location.href = mobileRedirectUrl\n      } else {\n        playStream()\n      }\n    }\n  }\n\n  if (!stream || moment().isBefore(moment(stream.startTime))) {\n    return <></>\n  }\n\n  else return (\n    <div role=\"button\" className={className} onClick={handlePlayStream}>\n      <svg className=\"icon\" role=\"presentation\">\n        <use xlinkHref=\"#icon-play\"></use>\n      </svg>\n    </div>\n  )\n}\n\nexport default withRouter(PlayButton)"]},"metadata":{},"sourceType":"module"}